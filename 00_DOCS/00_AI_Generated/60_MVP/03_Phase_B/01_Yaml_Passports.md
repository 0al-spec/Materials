Вот уточнённый и расширенный раздел 2. Парсер YAML-паспортов с пошаговыми подзадачами (5–6 шагов на каждый пункт):

⸻

2. Парсер YAML-паспортов

2.1. Создай директорию passports/ и добавь тестовый YAML
	•	В корне проекта создай папку: mkdir passports
	•	Внутри добавь файл fs.yaml с примером паспорта
	•	Укажи поля: id, tools, caps
	•	Пример структуры tools.read с params и cmd
	•	Убедись, что файл читается из кода (fs.readFileSync)

2.2. Реализуй модуль passportLoader.js для чтения и валидации YAML
	•	Создай файл passportLoader.js в src/
	•	Импортируй fs, path, js-yaml
	•	Напиши функцию loadPassports(dirPath): Map<agentId, passport>
	•	Пройди по всем .yaml в passports/ и парси их
	•	Сделай логирование успешных и ошибочных файлов
	•	Верни объект-реестр агентов по id

2.3. Определи структуру агента: id, tools, caps, routes
	•	Создай schema.js или описание ожидаемой структуры
	•	Убедись, что tools -- это объект с именами методов
	•	Добавь поддержку вложенных параметров (params, cmd)
	•	Валидация: отсутствие обязательных полей = ошибка
	•	Добавь базовый unit-тест с валидным и невалидным YAML
	•	Подготовь шаблон для документации структуры паспорта

2.4. Проверь корректность парсинга и логирование ошибок
	•	Запусти парсинг в main.js при старте
	•	Логируй agentId и количество методов при успешной загрузке
	•	Логируй ошибки YAML-синтаксиса и неправильных типов
	•	Для теста сломай fs.yaml и проверь поведение
	•	Убедись, что ошибки не блокируют загрузку других паспортов
	•	Добавь флаг verbose для отладки
